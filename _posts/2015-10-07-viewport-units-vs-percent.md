---
layout:     post
title:      Единицы viewport против процентов
date:       2015-10-07
summary:    Слышали про vw, vh, vmin и vmax, но не знаете где их применить? Хотите узнать как лучше всего делать полноэкранные изображения или планируете сделать сайт как у Apple с разделение на секции? Добро пожалось под кат!
---

<img src="/images/viewportvspercent.png" class="main-img">

<p><i>Данный материал является переводом статьи: <br>Ire Aderinokun <a href="http://bitsofco.de/2015/viewport-vs-percentage-units/">Viewport vs percentage units</a></i></p>

В моей статье <a href="http://bitsofco.de/2015/css-font-sizing/">«О размерах шрифтов в CSS»</a> я упоминала новые (относительно) единицы измерения. Эти единицы -- vw, vh, vmin и vmax, они основаны на размере вьюпорта браузера. Их фактический размер меняется в зависимости от изменения области просмотра браузера, что делает эти единицы идеальными для адаптивного дизайна. Хотя в моем предыдущем посте я выступила против использования этих единиц для указания размеров шрифта, они могут быть очень полезны для работы с элементами макета.

##Единицы измерения viewport

Единицы измерения viewport являются относительными единицами, это означает что они не могут быть измерены объективно. Их размер определяется размером области просмотра в браузере. Существуют четыре единицы, относящиеся к области просмотра.


<table>
	<tr>
		<th>Название</th>
		<th>Единица</th>
		<th>Описание</th>
	</tr>
	<tr>
		<td>Ширина Viewport</td>
		<td>vw</td>
		<td>1/100 ширины viewport</td>
	</tr>
	<tr>
		<td>Высота Viewport</td>
		<td>vh</td>
		<td>1/100 высоты viewport</td>
	</tr>
	<tr>
		<td>Минимум Viewport</td>
		<td>vmin</td>
		<td>1/100 наименьшего значения viewport (по высоте или ширине)</td>
	</tr>
	<tr>
		<td>Максимум Viewport</td>
		<td>vmax</td>
		<td>1/100 наибольшего значения viewport (по высоте или ширине)</td>
	</tr>
</table>


Я сконцентрирую внимание на первых двух, так как они наиболее часто используются.
Во многих случаях единицы viewport (vh и vw) пересекаются с процентами в плане возможностей. Тем не менее, каждая из них имеет свои сильные и слабые стороны.

Если резюмировать, то получится следующее:

> Когда имеешь дело с шириной, то лучше подходят %, а если с высотой, то лучше vh.


##Элементы во всю ширину страницы: % > vw

Как я уже говорила vw определяет размер элемента исходят из ширины viewport. Однако, браузеры рассчитывают размер с учетом места для скроллбара.


<img src="/images/viewportvsbody.jpg" style="display: block; margin: auto;">


Если ширина страницы превышает ширину viewport, то появляется полоса прокрутки. Однако на деле ширина viewport больше, чем ширина элемента html

	Viewport > html > body

Поэтому если вы установите ширину элемента в 100vw, то элемент выйдет за пределы html и body. в данном примере я сделала красную границу вокруг элемента html и залила разделы разными цветами.


<img src="/images/viewportvsbody2.png" style="display: block; margin: auto;">


Из-за этого нюанса делать элементы на всю ширину страницы лучше при помощи процентов, а не опираясь на ширину viewport.


##Элементы на всю высоту страницы: vh > %

При создании элементов, высота которых должна быть равна высоте страницы гораздо лучше использовать vh вместо процентов. Поскольку размер элемента определяемый в процентах задается относительного его родительского элемента, мы можем получить элемент высотой равной высоте экрана только если его родительский элемент так же занимает всю высоту экрана. Это означает что мы должны спозиционировать элемент как фиксированный для того чтобы сделать элемент html родительским, либо прибегнуть к использованию какого либо хака.

Используя vh добиться такого эффекта достаточно просто:


<pre>
<code class="css">
.example {
	height: 100vh;
}
</code>
</pre>


Вне зависимости от того как как вложен элемент .example его размеры могут быть заданы относительно размеров области просмотра. Проблема прокрутки не потревожит нас так как большинство сайтов не имеют горизонтального скроллбара

Вот несколько примеров того, как можно использовать единицы измерения vh.

##Полноэкранные фоновые изображения

Типичное использование единицы измерения vh -- для создания фонового изображения, которое охватывает всю высоту и ширину экрана, независимо от размера устройства. Сделать это достаточно легко.

<pre>
<code class="css">
.bg {
  position: relative;
  background: url('bg.jpg') center/cover;
  width: 100%;
  height: 100vh;
}
</code>
</pre>


<img src="/images/bgcover.gif" style="display: block; margin: auto;">


Аналогичным образом мы можем сделать эффект «страниц», задав каждому разделу размеры области просмотра.

<pre>
<code class="css">
section {
  width: 100%;
  height: 100vh;
}
</code>
</pre>


<img src="/images/section.gif" style="display: block; margin: auto;">


Мы можем использовать JavaScript чтобы создать иллюзию перелистывания страниц.

<pre>
<code class="javascript">
$('nav').on('click', function() {

  if ( $(this).hasClass('down') ) {
    var movePos = $(window).scrollTop() + $(window).height();
  }
  if ( $(this).hasClass('up') ) {
    var movePos = $(window).scrollTop() - $(window).height();
  }

  $('html, body').animate({
    scrollTop: movePos
  }, 1000);
})
</code>
</pre>

##Складывающееся изображение

Vh может также использоваться для контроля размера изображения в пределах страницы. Например, в рамках статьи. Мы хотим убедиться, что любое изображение будет показано полностью независимо от размера экрана.

Нам понадобится следующий код


<pre>
<code class="css">
img {
  width: auto; /* Автоматическая ширина для пропорциональности высоты */
  max-width: 100%; /* Не больше ширины родительского элемента */
  max-height: 90vh; /* Не превышая высоту viewport */
  margin: 2rem auto; 
}
</code>
</pre>


<img src="/images/foldimg.gif" style="display: block; margin: auto;">

##Поддержка браузерами

Поскольку данные единицы измерения являются относительно новыми, по-прежнему существуют проблемы при работе с определенными браузерами.

Вот как их можно решить.

<table>
	<tr>
		<th>Браузер</th>
		<th>Проблема</th>
		<th>Решение</th>
	</tr>
	<tr>
		<td>iOS Safari 7.1</td>
		<td>Могут быть баги с “vh”</td>
		<td>используйте медиа-запросы для конкретных устройств (<a href="https://gist.github.com/pburtchaell/e702f441ba9b3f76f587">см pburtchaell Gist</a>)</td>
	</tr>
	<tr>
		<td>Opera Mini 8, IE 8</td>
		<td>не поддерживается</td>
		<td>Используйте решение pburtchaell</td>
	</tr>
	<tr>
		<td>IE 9</td>
		<td>Принимает “vm” вместо “vmin”</td>
		<td>Задавайте размер используя обе единицы.
<pre>
<code class="css">
.example {
width: 100vm;
width: 100vmin;
}
</code>
</pre>
		</td>
	</tr>
	<tr>
		<td>IE 10-Edge</td>
		<td>Не поддерживается “vmax”</td>
		<td>Используйте решение pburtchaell</td>
	</tr>
</table>

